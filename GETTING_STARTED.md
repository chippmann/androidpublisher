# Getting started
Before you can publish your app bundles to the play store with this gradle plugin, you have to have:
- A google service account with the rights to publish and modify releases
- Already at least one release done on the track you want to publish to (not covered here)

[How to create and configure a service account](CONFIGURATION_OF_GOOGLE_SERVICE_ACCOUNT.md)
 
 ## General app configuration
 The plugin requires the appVersionCode to be defined in the `gradle.properties` file in your project.  
 Per default the key for this is `appVersionCode` but you can change it if you want (read below).
 
 Configure the plugin in the app's `build.gradle.kts` file.
 
 ## Configuration
 ```kotlin
androidpublisher {
    credentialsJsonPath = "path/to/your/service/account/credentials.json" // <- required: relative or absolute path to the credentials.json file for the service account
    enableGenerateVersionCode = true // <- optional, defaults true: defines if the appVersionCode should be generated (read below)
    appVersionCodeKey = "yourCustomKey" // <- optional, defaults "appVersionCode": key under which the app's version code is stored in the gradle.properties file
} 
```

### Version code generation
If you enable the `enableGenerateVersionCode` (enabled by default) the app's version code for the playstore gets 
autogenerated.  
It queries the currently published version code from the playstore and the one you defined in the `gradle.properties` 
and takes the higher one.  
It uses this version code +1 and writes it into the `gradle.properties`.

Example:
```
playStoreVersion=23
gradle.properties version=35

results in 35+1 = 36
```

## Usage
The plugin creates for each App flavour and build type two gradleTasks: `generateVersionCodeForX` and `uploadXToYTrack` 
where `X` is your appVersion and `Y` is the track in the google play store to where you can publish the app to.

Example:  
`generateVersionCodeForProductionRelease`  
`uploadProductionReleaseToInternalTrack`

These tasks can then be used in your CI/CD setup or triggered manually (as long as the apps signing information is on 
your local dev machine).